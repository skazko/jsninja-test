parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"bPwv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Editor=void 0;var t="bold-text",e="italic-text",a="header1-text",n="header2-text",r=[a,n],s=function(){function s(s){var i,o,l,c,d,p,h,u=this;this._toolbar=((i={})[t]=!1,i[e]=!1,i.style=null,i),this.upParagraphs=function(t){var e=t;t.querySelectorAll(".paragraph").forEach(function(t){console.log(t),e.after(t),e=t})},this.wrapText=function(t){t.childNodes.forEach(function(t){if(3===t.nodeType){var e=document.createElement("span");e.innerText=t.textContent,t.replaceWith(e)}})},this.addParagraph=function(){var t=document.createElement("div"),e=document.createElement("span");e.innerHTML="&#8203;",t.appendChild(e),t.classList.add("paragraph"),u.textarea.appendChild(t)},this.select=function(){var r=document.getSelection();if(u.textarea.contains(r.anchorNode))if(r.isCollapsed){if((o=r.anchorNode.parentElement)&&"SPAN"===o.nodeName){u.toolbar[t]=o.classList.contains(t),u.toolbar[e]=o.classList.contains(e);var s=o.closest(".paragraph");u.toolbar.style=s.classList.contains(a)?a:s.classList.contains(n)?n:null}u.selection&&(u.selection=null)}else{u.selection=r;var i=r.getRangeAt(0).commonAncestorContainer;if(3===i.nodeType){var o=i.parentElement;u.toolbar[t]=o.classList.contains(t),u.toolbar[e]=o.classList.contains(e);s=o.closest(".paragraph");u.toolbar.style=s.classList.contains(a)?a:s.classList.contains(n)?n:null}else if("SPAN"===i.nodeName){u.toolbar[t]=i.classList.contains(t),u.toolbar[e]=i.classList.contains(e);s=i.closest(".paragraph");u.toolbar.style=s.classList.contains(a)?a:s.classList.contains(n)?n:null}else{var l=u.selection.getRangeAt(0).cloneContents().querySelectorAll("span"),c=Array.from(l);if(u.toolbar[t]=c.length>0&&c.every(function(e){return e.classList.contains(t)}),u.toolbar[e]=c.length>0&&c.every(function(t){return t.classList.contains(e)}),i.classList.contains("paragraph")){s=i;u.toolbar.style=s.classList.contains(a)?a:s.classList.contains(n)?n:null}else{var d=new Set;l.forEach(function(t){d.add(t.closest(".paragraph"))});var p=Array.from(d);u.toolbar.style=p.every(function(t){return t.classList.contains(a)})?a:p.every(function(t){return t.classList.contains(n)})?n:null}}}else u.selection&&(u.selection=null)},this.applyModifier=function(t){return function(){var e=u.processSelection();e.every(function(e){return e.classList.contains(t)})?(e.forEach(function(e){return e.classList.toggle(t)}),u.toolbar[t]=!u.toolbar[t]):(e.forEach(function(e){return e.classList.add(t)}),u.toolbar[t]=!0)}},this.makeBold=this.applyModifier(t),this.makeItalic=this.applyModifier(e),this.applyStyle=function(t){return function(){var e=u.processSelection();if(e[0]!==e[0].closest(".paragraph").firstElementChild){var a=e[0].closest(".paragraph"),n=document.createElement("div");n.classList.add("paragraph"),a.after(n),a.childNodes.forEach(function(t){e.includes(t)&&n.append(t)})}if(e[e.length-1]!==e[e.length-1].closest(".paragraph").lastElementChild){a=e[e.length-1].closest(".paragraph");var s=document.createElement("div");s.classList.add("paragraph"),a.before(s),a.childNodes.forEach(function(t){e.includes(t)&&s.append(t)})}var i=new Set;e.forEach(function(t){i.add(t.closest(".paragraph"))});var o=Array.from(i),l=o.every(function(e){return e.classList.contains(t)}),c=r.filter(function(e){return e!==t});l?(o.forEach(function(e){return e.classList.toggle(t)}),u.toolbar.style=null):o.forEach(function(e){c.forEach(function(t){return e.classList.remove(t)}),e.classList.add(t),u.toolbar.style=t})}},this.applyH1=this.applyStyle(a),this.applyH2=this.applyStyle(n),this.editor=document.querySelector(null!==(o=null==s?void 0:s.editor)&&void 0!==o?o:".editor"),this.textarea=this.editor.querySelector(null!==(l=null==s?void 0:s.textarea)&&void 0!==l?l:"textarea"),this.btn_h1=this.editor.querySelector(null!==(c=null==s?void 0:s.btn_h1)&&void 0!==c?c:"btn_h1"),this.btn_h2=this.editor.querySelector(null!==(d=null==s?void 0:s.btn_h2)&&void 0!==d?d:"btn_h2"),this.btn_bold=this.editor.querySelector(null!==(p=null==s?void 0:s.btn_bold)&&void 0!==p?p:"btn_bold"),this.btn_italic=this.editor.querySelector(null!==(h=null==s?void 0:s.btn_italic)&&void 0!==h?h:"btn_italic"),this.selection=null,this.textdelete=new CustomEvent("textdelete"),this.toolbar=new Proxy(this._toolbar,{set:function(r,s,i,o){if("style"===s)i===a&&(u.btn_h1.classList.add("active"),u.btn_h2.classList.remove("active")),i===n&&(u.btn_h2.classList.add("active"),u.btn_h1.classList.remove("active")),null===i&&(u.btn_h2.classList.remove("active"),u.btn_h1.classList.remove("active"));else{var l=i?"add":"remove";s===t&&u.btn_bold.classList[l]("active"),s===e&&u.btn_italic.classList[l]("active")}return Reflect.set(r,s,i,o)}})}return s.prototype.init=function(){var t=this;this.textarea.setAttribute("tabindex","1"),this.textarea.setAttribute("contentEditable","true"),this.btn_bold.addEventListener("click",this.makeBold),this.btn_italic.addEventListener("click",this.makeItalic),this.btn_h1.addEventListener("click",this.applyH1),this.btn_h2.addEventListener("click",this.applyH2),document.addEventListener("selectionchange",this.select),this.addPStyle(),this.textarea.addEventListener("focus",function(){if(0===t.textarea.children.length){t.addParagraph();var e=t.textarea.lastElementChild.querySelector("span");t.moveCaretTo(e)}}),this.textarea.addEventListener("textdelete",function(){setTimeout(function(){"\n"==t.textarea.innerText||""===t.textarea.innerText?(t.textarea.innerHTML="",t.addParagraph()):t.textarea.querySelectorAll("."+Array.from(t.textarea.classList).join(".")+" .paragraph").forEach(t.wrapText)},0)}),this.textarea.addEventListener("keydown",function(e){"​"!==t.textarea.innerText&&0!==t.textarea.innerText.length||"Backspace"===e.code&&e.preventDefault(),"Backspace"!==e.code&&"Delete"!==e.code||t.selection&&t.textarea.dispatchEvent(t.textdelete)}),this.textarea.addEventListener("keyup",function(e){"Backspace"!==e.code&&"Delete"!==e.code||t.textarea.querySelectorAll(".paragraph").forEach(function(e){e.querySelector("span")||t.textarea.dispatchEvent(new CustomEvent("emptyparagraph",{detail:{p:e}}))})}),this.textarea.addEventListener("emptyparagraph",function(t){t.detail.p.remove()}),this.textarea.addEventListener("blur",function(){"​"!==t.textarea.innerText&&""!==t.textarea.innerText||(t.textarea.innerHTML="")}),this.textarea.addEventListener("cut",function(e){t.applyStylesToParagraphs(),setTimeout(function(){t.textarea.dispatchEvent(t.textdelete)},0)}),this.textarea.addEventListener("paste",function(e){console.log(e.clipboardData.getData("text/html")),setTimeout(function(){var e=t.textarea.querySelectorAll("."+Array.from(t.textarea.classList).join(".")+" .paragraph");e.forEach(t.upParagraphs),e.forEach(t.wrapText),e.forEach(function(t){0===t.textContent.length&&t.remove()})},50)}),this.textarea.addEventListener("copy",function(e){t.applyStylesToParagraphs()})},s.prototype.addPStyle=function(){var t=document.createElement("style");t.innerHTML=".paragraph {font-size: 1rem;}",document.head.append(t)},s.prototype.moveCaretTo=function(t){var e=document.createRange();e.selectNodeContents(t),e.collapse(!0);var a=window.getSelection();a.removeAllRanges(),a.addRange(e)},s.prototype.processSelection=function(){var t=this.selection.getRangeAt(0),e=[];if(t.startContainer===t.endContainer){if(3===t.startContainer.nodeType)if(0===t.startOffset&&t.endOffset===t.endContainer.length){var a=t.startContainer.parentElement;e.push(a)}else{var n=i(a=t.startContainer.parentElement,t.startOffset,t.endOffset);e.push(n)}else if("SPAN"===t.startContainer.nodeName)e.push(t.startContainer);else if(t.startContainer.classList.contains("paragraph"))for(var r=t.startOffset;r<t.endOffset;r++)e.push(t.startContainer.children.item(r))}else{var s=t.commonAncestorContainer;if(s.classList.contains("paragraph")&&e.push.apply(e,o(s,t)),s.classList.contains("edit-area")){var l,c=void 0,d=void 0;if(3===t.startContainer.nodeType)c=(l=t.startContainer.parentElement).classList.contains("paragraph")?l:l.closest(".paragraph");else c=t.startContainer.classList.contains("paragraph")?t.startContainer:t.startContainer.closest(".paragraph");if(3===t.endContainer.nodeType)d=(l=t.endContainer.parentElement).classList.contains("paragraph")?l:l.closest(".paragraph");else d=t.endContainer.classList.contains("paragraph")?t.endContainer:t.endContainer.closest(".paragraph");for(var p=c;p&&p!==d;)e.push.apply(e,o(p,t)),p=p.nextElementSibling;e.push.apply(e,o(d,t))}}var h=new Range;h.setStartBefore(e[0]),h.setEndAfter(e[e.length-1]);var u=document.getSelection();return u.removeAllRanges(),u.addRange(h),e},s.prototype.applyStylesToParagraphs=function(){document.querySelectorAll(".paragraph").forEach(function(t){var e=getComputedStyle(t);l(t).forEach(function(a){t.style[a]=e[a]})})},s}();function i(t,e,a){var n,r,s=t.cloneNode(!0);0!==e&&((n=t.cloneNode(!0)).firstChild.splitText(e),n.lastChild.remove(),s.firstChild.splitText(e),s.firstChild.remove()),a!==t.firstChild.length&&(s.firstChild.splitText(a-e),s.lastChild.remove(),(r=t.cloneNode(!0)).firstChild.splitText(a),r.firstChild.remove());var i=[n,s,r].filter(function(t){return void 0!==t&&"\n"!==t.textContent&&"​"!==t.textContent});return t.replaceWith.apply(t,i),s}function o(t,e){var a,n,r=[],s=e.startContainer,o=e.endContainer;t.contains(s)&&(a=3===s.nodeType?i(s.parentElement,e.startOffset,s.length):"SPAN"===s.nodeName?s:s.querySelector("span"),r.push(a)),t.contains(o)&&(n=3===o.nodeType?i(o.parentElement,0,e.endOffset):"SPAN"===o.nodeName?o:o.querySelector("span:last-child"));for(var l=a?a.nextElementSibling:t.firstElementChild;l&&l!==n;)r.push(l),l=l.nextElementSibling;return n&&r.push(n),r}function l(t){for(var e=new Set,a=0;a<document.styleSheets.length;a++)for(var n=document.styleSheets[a].cssRules,r=0;r<n.length;r++){var s=n[r];if(t.matches(s.selectorText))for(var i=0;i<s.style.length;i++){var o=s.style[i];e.add(o)}}return Array.from(e)}exports.Editor=s;
},{}],"B6dB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./wysiwig"),t=new e.Editor({editor:".editor",textarea:".edit-area",btn_h1:".head-1",btn_h2:".head-2",btn_bold:".bold",btn_italic:".italic"});t.init();
},{"./wysiwig":"bPwv"}]},{},["B6dB"], null)
//# sourceMappingURL=/src.b3db3701.js.map