parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"bPwv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Editor=void 0;var t="bold-text",e="italic-text",n="header1-text",a="header2-text",s=[n,a],i=function(){function i(i){var r,o,l,c,d,h,p,u=this;this._toolbar=((r={})[t]=!1,r[e]=!1,r.style=null,r),this.addParagraph=function(){var t=document.createElement("div"),e=document.createElement("span");e.innerHTML="&#8203;",t.appendChild(e),t.classList.add("paragraph"),u.textarea.appendChild(t)},this.select=function(){var s=document.getSelection();if(s.isCollapsed){var i=s.anchorNode.parentElement;u.toolbar[t]=i.classList.contains(t),u.toolbar[e]=i.classList.contains(e),u.toolbar.style=i.classList.contains(n)?n:i.classList.contains(a)?a:null,u.selection&&(u.selection=null)}else if(u.textarea.contains(s.anchorNode)){u.selection=s;var r=s.getRangeAt(0).commonAncestorContainer;if(3===r.nodeType){i=r.parentElement;u.toolbar[t]=i.classList.contains(t),u.toolbar[e]=i.classList.contains(e),u.toolbar.style=i.classList.contains(n)?n:i.classList.contains(a)?a:null}else if("SPAN"===r.nodeName)u.toolbar[t]=r.classList.contains(t),u.toolbar[e]=r.classList.contains(e),u.toolbar.style=r.classList.contains(n)?n:r.classList.contains(a)?a:null;else{var o=u.selection.getRangeAt(0).cloneContents().querySelectorAll("span"),l=Array.from(o);u.toolbar[t]=l.every(function(e){return e.classList.contains(t)}),u.toolbar[e]=l.every(function(t){return t.classList.contains(e)}),u.toolbar.style=l.every(function(t){return t.classList.contains(n)})?n:l.every(function(t){return t.classList.contains(a)})?a:null}}else u.selection&&(u.selection=null)},this.applyModifier=function(t){return function(){var e=u.processSelection();e.every(function(e){return e.classList.contains(t)})?(e.forEach(function(e){return e.classList.toggle(t)}),u.toolbar[t]=!u.toolbar[t]):(e.forEach(function(e){return e.classList.add(t)}),u.toolbar[t]=!0)}},this.makeBold=this.applyModifier(t),this.makeItalic=this.applyModifier(e),this.applyStyle=function(t){return function(){var e=u.processSelection(),n=e.every(function(e){return e.classList.contains(t)}),a=s.filter(function(e){return e!==t});n?(e.forEach(function(e){return e.classList.toggle(t)}),u.toolbar.style=null):e.forEach(function(e){a.forEach(function(t){return e.classList.remove(t)}),e.classList.add(t),u.toolbar.style=t})}},this.applyH1=this.applyStyle(n),this.applyH2=this.applyStyle(a),this.editor=document.querySelector(null!==(o=null==i?void 0:i.editor)&&void 0!==o?o:".editor"),this.textarea=this.editor.querySelector(null!==(l=null==i?void 0:i.textarea)&&void 0!==l?l:"textarea"),this.btn_h1=this.editor.querySelector(null!==(c=null==i?void 0:i.btn_h1)&&void 0!==c?c:"btn_h1"),this.btn_h2=this.editor.querySelector(null!==(d=null==i?void 0:i.btn_h2)&&void 0!==d?d:"btn_h2"),this.btn_bold=this.editor.querySelector(null!==(h=null==i?void 0:i.btn_bold)&&void 0!==h?h:"btn_bold"),this.btn_italic=this.editor.querySelector(null!==(p=null==i?void 0:i.btn_italic)&&void 0!==p?p:"btn_italic"),this.selection=null,this.toolbar=new Proxy(this._toolbar,{set:function(s,i,r,o){if("style"===i)r===n&&(u.btn_h1.classList.add("active"),u.btn_h2.classList.remove("active")),r===a&&(u.btn_h2.classList.add("active"),u.btn_h1.classList.remove("active")),null===r&&(u.btn_h2.classList.remove("active"),u.btn_h1.classList.remove("active"));else{var l=r?"add":"remove";i===t&&u.btn_bold.classList[l]("active"),i===e&&u.btn_italic.classList[l]("active")}return Reflect.set(s,i,r,o)}})}return i.prototype.init=function(){var t=this;this.textarea.setAttribute("tabindex","1"),this.textarea.setAttribute("contentEditable","true"),this.btn_bold.addEventListener("click",this.makeBold),this.btn_italic.addEventListener("click",this.makeItalic),this.btn_h1.addEventListener("click",this.applyH1),this.btn_h2.addEventListener("click",this.applyH2),document.addEventListener("selectionchange",this.select),this.textarea.addEventListener("focus",function(){if(0===t.textarea.children.length){t.addParagraph();var e=t.textarea.lastElementChild.querySelector("span");t.moveCaretTo(e)}}),this.textarea.addEventListener("keydown",function(t){this.innerText.length<=1&&"Backspace"===t.code&&t.preventDefault()}),this.textarea.addEventListener("cut",function(t){this.innerText.length}),this.textarea.addEventListener("paste",function(t){t.clipboardData.types.includes("text/plain"),t.clipboardData.types.includes("text/html")})},i.prototype.moveCaretTo=function(t){var e=document.createRange();e.selectNodeContents(t),e.collapse(!0);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)},i.prototype.processSelection=function(){var t=this.selection.getRangeAt(0),e=[];if(t.startContainer===t.endContainer){if(3===t.startContainer.nodeType)if(0===t.startOffset&&t.endOffset===t.endContainer.length){var n=t.startContainer.parentElement;e.push(n)}else{var a=r(n=t.startContainer.parentElement,t.startOffset,t.endOffset);e.push(a)}else if("SPAN"===t.startContainer.nodeName)e.push(t.startContainer);else if(t.startContainer.classList.contains("paragraph"))for(var s=t.startOffset;s<t.endOffset;s++)e.push(t.startContainer.children.item(s))}else{var i=t.commonAncestorContainer;if(i.classList.contains("paragraph")&&e.push.apply(e,o(i,t)),i.classList.contains("edit-area")){var l,c=void 0,d=void 0;if(3===t.startContainer.nodeType)c=(l=t.startContainer.parentElement).classList.contains("paragraph")?l:l.closest(".paragraph");else c=t.startContainer.classList.contains("paragraph")?t.startContainer:t.startContainer.closest(".paragraph");if(3===t.endContainer.nodeType)d=(l=t.endContainer.parentElement).classList.contains("paragraph")?l:l.closest(".paragraph");else d=t.endContainer.classList.contains("paragraph")?t.endContainer:t.endContainer.closest(".paragraph");for(var h=c;h&&h!==d;)e.push.apply(e,o(h,t)),h=h.nextElementSibling;e.push.apply(e,o(d,t))}}var p=new Range;p.setStartBefore(e[0]),p.setEndAfter(e[e.length-1]);var u=document.getSelection();return u.removeAllRanges(),u.addRange(p),e},i}();function r(t,e,n){var a,s,i=t.cloneNode(!0);0!==e&&((a=t.cloneNode(!0)).firstChild.splitText(e),a.lastChild.remove(),i.firstChild.splitText(e),i.firstChild.remove()),n!==t.firstChild.length&&(i.firstChild.splitText(n-e),i.lastChild.remove(),(s=t.cloneNode(!0)).firstChild.splitText(n),s.firstChild.remove());var r=[a,i,s].filter(function(t){return void 0!==t});return t.replaceWith.apply(t,r),i}function o(t,e){var n,a,s=[],i=e.startContainer,o=e.endContainer;t.contains(i)&&(n=3===i.nodeType?r(i.parentElement,e.startOffset,i.length):"SPAN"===i.nodeName?i:i.querySelector("span"),s.push(n)),t.contains(o)&&(a=3===o.nodeType?r(o.parentElement,0,e.endOffset):"SPAN"===o.nodeName?o:o.querySelector("span:last-child"));for(var l=n?n.nextElementSibling:t.firstElementChild;l&&l!==a;)s.push(l),l=l.nextElementSibling;return a&&s.push(a),s}exports.Editor=i;
},{}],"B6dB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./wysiwig"),t=new e.Editor({editor:".editor",textarea:".edit-area",btn_h1:".head-1",btn_h2:".head-2",btn_bold:".bold",btn_italic:".italic"});t.init();
},{"./wysiwig":"bPwv"}]},{},["B6dB"], null)
//# sourceMappingURL=/src.2fb00bba.js.map